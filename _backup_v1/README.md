# ระบบบันทึกคะแนนนักเรียน

ระบบบันทึกและจัดการคะแนนสำหรับครู พร้อมระบบตัดเกรดและ export ผลการเรียน

## คุณสมบัติหลัก

### 1. การจัดการรายวิชา
- สร้างและจัดการรายวิชาแยกตามภาคเรียน/ปีการศึกษา
- กำหนดคะแนนงาน และคะแนนสอบ
- ปิดรายวิชาเมื่อเสร็จสิ้นภาคเรียน

### 2. ระบบงาน
- **งานทั่วไป**: คะแนนรวมแบ่งตามจำนวนครั้งที่ส่ง
  - ไม่ส่งงาน: หักคะแนนตามสัดส่วน
  - ส่งช้า: ได้ 80% ของคะแนนที่ควรได้
- **งานพิเศษ**: กำหนดคะแนนเฉพาะแต่ละงาน (ดึงจากคะแนนงานรวม)

### 3. การจัดการนักเรียน
- นำเข้านักเรียนผ่าน CSV
- เพิ่มนักเรียนทีละคน
- นักเรียนสามารถดูผลของตนเองได้

### 4. ระบบตัดเกรด
- คำนวณเกรดอัตโนมัติ (A, B+, B, C+, C, D+, D, F)
- แสดงผลเป็นตัวเลข (A=4.0, B+=3.5, ฯลฯ)

### 5. Export ผลการเรียน
- Export เป็น CSV 4 คอลัมน์:
  - คะแนนก่อนสอบกลางภาค
  - คะแนนสอบกลางภาค
  - คะแนนหลังสอบกลางภาค
  - คะแนนสอบปลายภาค
- ถ่วงน้ำหนักคะแนนงานตามที่กำหนด

### 6. Role-based Access
- **ครู**: สร้างรายวิชา, บันทึกคะแนน, export
- **ทะเบียน**: เปิด/ปิดภาคเรียน, ปีการศึกษา
- **นักเรียน**: ดูผลของตนเอง

## เทคโนโลジีที่ใช้

- **Frontend**: React 18 + Vite
- **Styling**: Tailwind CSS
- **State Management**: Zustand
- **Database**: Supabase (PostgreSQL)
- **Authentication**: Supabase Auth
- **CSV Processing**: PapaParse

## การติดตั้ง

### 1. ติดตั้ง Dependencies

```bash
cd grade-management-system
npm install
```

### 2. ตั้งค่า Supabase

1. สร้างโปรเจคใหม่ใน [Supabase](https://supabase.com)
2. รัน SQL Schema จากไฟล์ `supabase-schema.sql` ใน SQL Editor
3. คัดลอก Project URL และ Anon Key

### 3. ตั้งค่า Environment Variables

สร้างไฟล์ `.env` จาก `.env.example`:

```bash
cp .env.example .env
```

แก้ไขไฟล์ `.env`:

```
VITE_SUPABASE_URL=your-supabase-project-url
VITE_SUPABASE_ANON_KEY=your-supabase-anon-key
```

### 4. รันโปรเจค

```bash
npm run dev
```

เปิดเบราว์เซอร์ที่ `http://localhost:3000`

## โครงสร้างฐานข้อมูล

### ตารางหลัก

- `users` - ข้อมูลผู้ใช้ (ครู, ทะเบียน, นักเรียน)
- `academic_years` - ปีการศึกษา
- `semesters` - ภาคเรียน
- `students` - ข้อมูลนักเรียน
- `courses` - รายวิชา
- `course_enrollments` - การลงทะเบียนเรียน
- `assignments` - งานที่มอบหมาย
- `assignment_submissions` - การส่งงาน
- `exams` - การสอบ
- `exam_scores` - คะแนนสอบ
- `export_settings` - การตั้งค่า export

## การใช้งาน

### สำหรับครู

1. **สร้างรายวิชา**
   - ไปที่ Dashboard → สร้างรายวิชาใหม่
   - กรอกรหัสวิชา, ชื่อวิชา, เลือกภาคเรียน
   - กำหนดคะแนนงานและคะแนนสอบ

2. **เพิ่มนักเรียน**
   - เข้าไปในรายวิชา → แท็บนักเรียน
   - นำเข้าจาก CSV หรือเพิ่มทีละคน

3. **สร้างงาน**
   - แท็บภาพรวม → เพิ่มงาน
   - เลือกประเภท: งานทั่วไป หรือ งานพิเศษ
   - งานพิเศษต้องกำหนดคะแนน

4. **สร้างการสอบ**
   - แท็บภาพรวม → เพิ่มการสอบ
   - กำหนดชื่อและคะแนนเต็ม

5. **บันทึกคะแนน**
   - แท็บบันทึกคะแนน
   - เลือกงานหรือการสอบที่จะบันทึก
   - กรอกคะแนนหรือสถานะการส่งงาน

6. **Export ผลการเรียน**
   - กดปุ่ม Export ผลการเรียน
   - กำหนดน้ำหนักคะแนน
   - เลือกสอบกลางภาคและปลายภาค
   - Export เป็น CSV

### การคำนวณคะแนน

#### งานทั่วไป
```
คะแนนต่อครั้ง = คะแนนงานทั่วไปรวม / จำนวนครั้งทั้งหมด

คะแนนที่ได้ = (จำนวนครั้งที่ส่งทันกำหนด × คะแนนต่อครั้ง) + 
              (จำนวนครั้งที่ส่งช้า × คะแนนต่อครั้ง × 0.8)
```

**ตัวอย่าง:**
- คะแนนงานทั่วไป: 45 คะแนน (งานพิเศษดึงไป 15 คะแนน)
- มีงาน 10 ครั้ง
- ส่งทันกำหนด 7 ครั้ง, ส่งช้า 2 ครั้ง, ไม่ส่ง 1 ครั้ง

```
คะแนนต่อครั้ง = 45 / 10 = 4.5
ส่งทันกำหนด = 7 × 4.5 = 31.5
ส่งช้า = 2 × 4.5 × 0.8 = 7.2
รวม = 31.5 + 7.2 = 38.7 คะแนน
```

#### เกรด
- A: 80-100 (4.0)
- B+: 75-79 (3.5)
- B: 70-74 (3.0)
- C+: 65-69 (2.5)
- C: 60-64 (2.0)
- D+: 55-59 (1.5)
- D: 50-54 (1.0)
- F: 0-49 (0)

## ฟีเจอร์ที่จะพัฒนาต่อ

- [ ] ระบบแจ้งเตือนการส่งงาน
- [ ] Dashboard แสดงสถิติขั้นสูง
- [ ] ระบบ comment งาน
- [ ] Import คะแนนจาก Excel
- [ ] สร้าง PDF รายงาน
- [ ] Mobile responsive ให้ดียิ่งขึ้น
- [ ] ระบบแชทระหว่างครูกับนักเรียน
- [ ] Student Dashboard
- [ ] Registrar Dashboard
- [ ] Analytics & Reports

## ✅ Phase 1 Complete!

**Core Features (100% Complete):**
- ✅ CreateAssignment - สร้างงานทั้งแบบทั่วไปและพิเศษ
- ✅ CreateExam - สร้างการสอบพร้อม validation
- ✅ GradingPage - บันทึกคะแนนแบบครบวงจร

ระบบพร้อมใช้งานจริงแล้ว! อ่านรายละเอียดใน `PHASE1_COMPLETE.md`

## License

MIT License

## ผู้พัฒนา

พัฒนาโดย Claude (Anthropic AI)
ตามความต้องการของผู้ใช้
